# Projet TFTP (Client & Serveur) - RFC 1350

Ce projet impl√©mente un client et un serveur TFTP (Trivial File Transfer Protocol) en langage C, conformes √† la norme **RFC 1350**. Il permet le transfert de fichiers (lecture et √©criture) via le protocole UDP de mani√®re fiable gr√¢ce √† un m√©canisme de retransmission et de gestion des timeouts.

## üöÄ Fonctionnalit√©s

*   **Conformit√© RFC 1350** : Respect du format des paquets (RRQ, WRQ, DATA, ACK, ERROR).
*   **Mode Client & Serveur** :
    *   **Client** : Permet de t√©l√©charger (`get`) ou t√©l√©verser (`put`) des fichiers vers un serveur TFTP.
    *   **Serveur** : Serveur it√©ratif capable de g√©rer, stocker et servir des fichiers depuis un r√©pertoire d√©di√© (`.tftp/`).
*   **Fiabilit√©** :
    *   Gestion des **timeouts** (socket options + boucles de rejeu).
    *   **Retransmission** automatique des paquets perdus (Max 5 tentatives).
    *   Gestion du **TID (Transfer Identifier)** pour assurer l'unicit√© et la s√©curit√© des sessions de transfert.
    *   Anti-doublons (lutte contre le *Sorcerer's Apprentice Syndrome*).
*   **S√©curit√©** :
    *   Protection contre le **Directory Traversal** (rejet des chemins contenant `..`).
    *   V√©rification stricte de l'origine des paquets (IP et Port).

## üõ†Ô∏è Compilation

Le projet ne n√©cessite aucune d√©pendance externe hors de la biblioth√®que standard C et des headers POSIX/BSD (`sys/socket.h`, `arpa/inet.h`, etc.).

Pour compiler le client et le serveur :

```bash
# Compiler le serveur
gcc server.c -o server

# Compiler le client
gcc client.c -o client
```

## üìñ Utilisation

### 1. D√©marrer le Serveur

Le serveur √©coute par d√©faut sur le port **69** (UDP). Notez que l'utilisation du port 69 n√©cessite g√©n√©ralement des privil√®ges administrateur (root).

```bash
sudo ./server
```
*Le serveur stockera les fichiers re√ßus et cherchera les fichiers demand√©s dans le dossier cach√© `.tftp/` (cr√©√© automatiquement).*

### 2. Utiliser le Client

La syntaxe d'utilisation du client est la suivante :

```bash
./client <ip_serveur> <commande> <fichier> [port]
```

*   **ip_serveur** : L'adresse IP du serveur TFTP (ex: `127.0.0.1`).
*   **commande** :
    *   `get` : T√©l√©charger un fichier du serveur.
    *   `put` : Envoyer un fichier vers le serveur.
*   **fichier** : Nom du fichier √† transf√©rer.
*   **port** *(optionnel)* : Port du serveur (d√©faut : 69).

#### Exemples

**T√©l√©chargement (GET) :**
R√©cup√©rer `image.png` depuis le serveur local :
```bash
./client 127.0.0.1 get image.png
```

**Envoi (PUT) :**
Envoyer `document.txt` vers le serveur :
```bash
./client 127.0.0.1 put document.txt
```

**Sur un port sp√©cifique (ex: 8080) :**
```bash
./client 192.168.1.50 get data.bin 8080
```

## üìÇ Structure du Projet

*   **`client.c`** : Code source du client. G√®re l'analyse des arguments, l'initialisation socket, et les boucles de transfert (machines √† √©tats implicites).
*   **`server.c`** : Code source du serveur. √âcoute sur le port principal, puis d√©l√®gue le traitement RRQ/WRQ √† des sockets √©ph√©m√®res d√©di√©es.
*   **`.tftp/`** : R√©pertoire de stockage par d√©faut du serveur (cr√©√© √† l'ex√©cution).

## ‚ö†Ô∏è Notes Techniques

*   **Taille de bloc** : Fix√©e √† 512 octets (standard RFC 1350).
*   **Timeout** : Configur√© √† 5 secondes avec 5 essais maximum avant abandon.
*   **Mode** : Le transfert se fait implicitement en mode "octet" (binaire), adapt√© √† tous types de fichiers.

## Auteurs

Projet r√©alis√© dans le cadre de la SAE R√©seaux.
